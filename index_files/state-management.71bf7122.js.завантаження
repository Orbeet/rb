"use strict";(self.webpackChunkvkwidgets=self.webpackChunkvkwidgets||[]).push([[140],{53934:(e,t,r)=>{r.d(t,{produce:()=>Q});var n=Object.defineProperty,a=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,s=(e,t,r)=>t in e?n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,l=(e,t)=>{for(var r in t||(t={}))o.call(t,r)&&s(e,r,t[r]);if(a)for(var r of a(t))i.call(t,r)&&s(e,r,t[r]);return e},c=Symbol.for("immer-nothing"),u=Symbol.for("immer-draftable"),f=Symbol.for("immer-state");function d(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var p=Object.getPrototypeOf;function m(e){return!!e&&!!e[f]}function h(e){var t;return!!e&&(g(e)||Array.isArray(e)||!!e[u]||!!(null==(t=e.constructor)?void 0:t[u])||w(e)||k(e))}var y=Object.prototype.constructor.toString();function g(e){if(!e||"object"!=typeof e)return!1;const t=p(e);if(null===t)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object||"function"==typeof r&&Function.toString.call(r)===y}function b(e,t){0===v(e)?Object.entries(e).forEach((([r,n])=>{t(r,n,e)})):e.forEach(((r,n)=>t(n,r,e)))}function v(e){const t=e[f];return t?t.type_:Array.isArray(e)?1:w(e)?2:k(e)?3:0}function _(e,t){return 2===v(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function S(e,t,r){const n=v(e);2===n?e.set(t,r):3===n?e.add(r):e[t]=r}function w(e){return e instanceof Map}function k(e){return e instanceof Set}function j(e){return e.copy_||e.base_}function O(e,t){if(w(e))return new Map(e);if(k(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);if(!t&&g(e)){if(!p(e)){const t=Object.create(null);return Object.assign(t,e)}return l({},e)}const r=Object.getOwnPropertyDescriptors(e);delete r[f];let n=Reflect.ownKeys(r);for(let t=0;t<n.length;t++){const a=n[t],o=r[a];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(r[a]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[a]})}return Object.create(p(e),r)}function P(e,t=!1){return $(e)||m(e)||!h(e)||(v(e)>1&&(e.set=e.add=e.clear=e.delete=z),Object.freeze(e),t&&b(e,((e,t)=>P(t,!0)))),e}function z(){d(2)}function $(e){return Object.isFrozen(e)}var x,A={};function C(e){const t=A[e];return t||d(0),t}function N(){return x}function E(e,t){t&&(C("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function M(e){F(e),e.drafts_.forEach(R),e.drafts_=null}function F(e){e===x&&(x=e.parent_)}function D(e){return x={drafts_:[],parent_:x,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function R(e){const t=e[f];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function q(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return void 0!==e&&e!==r?(r[f].modified_&&(M(t),d(4)),h(e)&&(e=I(t,e),t.parent_||K(t,e)),t.patches_&&C("Patches").generateReplacementPatches_(r[f].base_,e,t.patches_,t.inversePatches_)):e=I(t,r,[]),M(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==c?e:void 0}function I(e,t,r){if($(t))return t;const n=t[f];if(!n)return b(t,((a,o)=>B(e,n,t,a,o,r))),t;if(n.scope_!==e)return t;if(!n.modified_)return K(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const t=n.copy_;let a=t,o=!1;3===n.type_&&(a=new Set(t),t.clear(),o=!0),b(a,((a,i)=>B(e,n,t,a,i,r,o))),K(e,t,!1),r&&e.patches_&&C("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function B(e,t,r,n,a,o,i){if(m(a)){const i=I(e,a,o&&t&&3!==t.type_&&!_(t.assigned_,n)?o.concat(n):void 0);if(S(r,n,i),!m(i))return;e.canAutoFreeze_=!1}else i&&r.add(a);if(h(a)&&!$(a)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;I(e,a),t&&t.scope_.parent_||K(e,a)}}function K(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&P(t,r)}var W={get(e,t){if(t===f)return e;const r=j(e);if(!_(r,t))return function(e,t,r){var n;const a=T(t,r);return a?"value"in a?a.value:null==(n=a.get)?void 0:n.call(e.draft_):void 0}(e,r,t);const n=r[t];return e.finalized_||!h(n)?n:n===U(e.base_,t)?(V(e),e.copy_[t]=X(n,e)):n},has(e,t){return t in j(e)},ownKeys(e){return Reflect.ownKeys(j(e))},set(e,t,r){const n=T(j(e),t);if(null==n?void 0:n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const n=U(j(e),t),i=null==n?void 0:n[f];if(i&&i.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(((a=r)===(o=n)?0!==a||1/a==1/o:a!=a&&o!=o)&&(void 0!==r||_(e.base_,t)))return!0;V(e),G(e)}var a,o;return e.copy_[t]===r&&(void 0!==r||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return void 0!==U(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,V(e),G(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=j(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:n.enumerable,value:r[t]}:n},defineProperty(){d(11)},getPrototypeOf(e){return p(e.base_)},setPrototypeOf(){d(12)}},L={};function U(e,t){const r=e[f];return(r?j(r):e)[t]}function T(e,t){if(!(t in e))return;let r=p(e);for(;r;){const e=Object.getOwnPropertyDescriptor(r,t);if(e)return e;r=p(r)}}function G(e){e.modified_||(e.modified_=!0,e.parent_&&G(e.parent_))}function V(e){e.copy_||(e.copy_=O(e.base_,e.scope_.immer_.useStrictShallowCopy_))}b(W,((e,t)=>{L[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),L.deleteProperty=function(e,t){return L.set.call(this,e,t,void 0)},L.set=function(e,t,r){return W.set.call(this,e[0],t,r,e[0])};function X(e,t){const r=w(e)?C("MapSet").proxyMap_(e,t):k(e)?C("MapSet").proxySet_(e,t):function(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:N(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=n,o=W;r&&(a=[n],o=L);const{revoke:i,proxy:s}=Proxy.revocable(a,o);return n.draft_=s,n.revoke_=i,s}(e,t);return(t?t.scope_:N()).drafts_.push(r),r}function H(e){if(!h(e)||$(e))return e;const t=e[f];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=O(e,t.scope_.immer_.useStrictShallowCopy_)}else r=O(e,!0);return b(r,((e,t)=>{S(r,e,H(t))})),t&&(t.finalized_=!1),r}var J=new class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,r)=>{if("function"==typeof e&&"function"!=typeof t){const r=t;t=e;const n=this;return function(e=r,...a){return n.produce(e,(e=>t.call(this,e,...a)))}}let n;if("function"!=typeof t&&d(6),void 0!==r&&"function"!=typeof r&&d(7),h(e)){const a=D(this),o=X(e,void 0);let i=!0;try{n=t(o),i=!1}finally{i?M(a):F(a)}return E(a,r),q(n,a)}if(!e||"object"!=typeof e){if(n=t(e),void 0===n&&(n=e),n===c&&(n=void 0),this.autoFreeze_&&P(n,!0),r){const t=[],a=[];C("Patches").generateReplacementPatches_(e,n,t,a),r(t,a)}return n}d(1)},this.produceWithPatches=(e,t)=>{if("function"==typeof e)return(t,...r)=>this.produceWithPatches(t,(t=>e(t,...r)));let r,n;return[this.produce(e,t,((e,t)=>{r=e,n=t})),r,n]},"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),"boolean"==typeof(null==e?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){h(e)||d(8),m(e)&&(e=function(e){m(e)||d(10);return H(e)}(e));const t=D(this),r=X(e,void 0);return r[f].isManual_=!0,F(t),r}finishDraft(e,t){const r=e&&e[f];r&&r.isManual_||d(9);const{scope_:n}=r;return E(n,t),q(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const n=t[r];if(0===n.path.length&&"replace"===n.op){e=n.value;break}}r>-1&&(t=t.slice(r+1));const n=C("Patches").applyPatches_;return m(e)?n(e,t):this.produce(e,(e=>n(e,t)))}},Q=J.produce;J.produceWithPatches.bind(J),J.setAutoFreeze.bind(J),J.setUseStrictShallowCopy.bind(J),J.applyPatches.bind(J),J.createDraft.bind(J),J.finishDraft.bind(J)},4190:(e,t,r)=>{r.d(t,{createGate:()=>b,useEvent:()=>m,useGate:()=>y,useStore:()=>h});var n=r(67294),a=r(98116),o=r(52798),i=r(61688);function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s.apply(this,arguments)}function l(e,t,r,n){let o=[a.step.run({fn:e=>t(e)})];if(n&&o.unshift(n),r){let t=(0,a.createNode)({node:o}),n=e.graphite.id,i=r.additionalLinks,s=i[n]||[];return i[n]=s,s.push(t),()=>{let e=s.indexOf(t);-1!==e&&s.splice(e,1),(0,a.clearNode)(t)}}{let t=(0,a.createNode)({node:o,parent:[e],family:{owners:e}});return()=>{(0,a.clearNode)(t)}}}function c(e,t){return t.displayName=e,t}function u(e,t){a.is.store(e)||v("expect useStore argument to be a store");let r=n.useCallback((r=>l(e,r,t)),[e,t]),o=n.useCallback((()=>k(e,t)),[e,t]);return S(r,o,o)}function f(e,t){let r=a.is.unit(e),o={};r?o={unit:e}:"@@unitShape"in e?"function"==typeof e["@@unitShape"]?o=e["@@unitShape"]():v("expect @@unitShape to be a function"):o=e;let i=Array.isArray(o),c=n.useRef({stale:1,justSubscribed:0,scope:t}),[u,f,d,p,m]=n.useMemo((()=>{c.current.stale=1;let e=Array.isArray(o)?[]:{},r=[],n=[],i=[],s=[];for(let l in o){let c=o[l];a.is.unit(c)||v("expect useUnit argument to be a unit"),a.is.event(c)||a.is.effect(c)?(e[l]=t?(0,a.scopeBind)(c,{scope:t}):c,i.push(l),s.push(c)):(e[l]=null,r.push(l),n.push(c))}return[e,r,n,i,s]}),[c,t,...Object.keys(o),...Object.values(o)]),h=n.useRef({value:u,storeKeys:f,eventKeys:p,eventValues:m}),y=n.useCallback((e=>{let r=c.current;r.justSubscribed=1;let n=()=>{r.stale||(r.stale=1,e())},o=a.step.compute({priority:"sampler",batch:1}),i=d.map((e=>l(e,n,t,o)));return()=>{i.forEach((e=>e()))}}),[d,t,h,c]),g=n.useCallback((()=>{let e,n=h.current,a=c.current,o=0,l=n.value,y=n.storeKeys,g=n.eventKeys,b=n.eventValues,v=t!==a.scope;if(a.stale||a.justSubscribed||v){o=!a.justSubscribed||v,e=i?[...u]:s({},u),y.length===f.length&&g.length===p.length||(o=1);for(let r=0;r<f.length;r++){let n=k(d[r],t),a=f[r];o||(o=y.includes(a)?l[a]!==n:1),e[a]=n}for(let e=0;e<p.length;e++){let t=m[e],r=p[e];o||(o=g.includes(r)?b[g.indexOf(r)]!==t:1)}}return o&&(n.value=e),n.storeKeys=f,n.eventKeys=p,n.eventValues=m,a.stale=0,a.justSubscribed=!o,a.scope=t,r?n.value.unit:n.value}),[y,d,m,t,h,c]);return S(y,g,g)}function d(e,t={},r){let{open:a,close:o,set:i}=f({open:e.open,close:e.close,set:e.set},r),s=n.useMemo((()=>({open:a,close:o,set:i})),[e,a]),l=n.useRef({value:null,count:0});_((()=>(s.open(l.current.value),()=>s.close(l.current.value))),[s]),((e,t)=>{if(e===t)return 1;if("object"==typeof e&&null!==e&&"object"==typeof t&&null!==t){let r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return 0;for(let n=0;n<r.length;n++){let a=r[n];if(e[a]!==t[a])return 0}return 1}return 0})(l.current.value,t)||(l.current.value=t,l.current.count+=1),_((()=>{s.set(l.current.value)}),[l.current.count])}function p(e){let t=n.useContext(j);return e&&!t&&v("No scope found, consider adding <Provider> to app root"),t}function m(e,t){return((e,t)=>{if(!t)return e;let r=a.is.unit(e)||"object"!=typeof e?{event:e}:e;return n.useMemo((()=>{if(a.is.unit(e))return(0,a.scopeBind)(e,{scope:t});let r=Array.isArray(e)?[]:{};for(let n in e)r[n]=(0,a.scopeBind)(e[n],{scope:t});return r}),[t,...Object.keys(r),...Object.values(r)])})(e,p(null==t?void 0:t.forceScope))}function h(e,t){return u(e,p(null==t?void 0:t.forceScope))}function y(e,t={},r){return d(e,t,p(null==r?void 0:r.forceScope))}function g(e,t){let r=t?e:e[0];var n;(e=>{if(!e)throw Error("expect first argument be an object")})(P(n=r)||(e=>"function"==typeof e)(n));let a=r.or,o=r.and;if(o){let r=t?o:o[0];if(P(r)&&"and"in r){let r=g(o,t);e=r[0],a=s({},a,r[1])}else e=o}return[e,a]}function b(...e){return(({domain:e,defaultState:t,hook:r,mainConfig:n,maybeConfig:o})=>{function i(e){return r(i,e,p()),null}let s=z({or:o,and:n}),l=`${e?`${e.compositeName.fullName}/`:""}${s.name||"gate"}`,u=(0,a.createEvent)({name:`${l}.set`,sid:s.sid?`${s.sid}|set`:void 0}),f=(0,a.createEvent)({name:`${l}.open`,sid:s.sid?`${s.sid}|open`:void 0}),d=(0,a.createEvent)({name:`${l}.close`,sid:s.sid?`${s.sid}|close`:void 0}),m=(0,a.createStore)(Boolean(0),{name:`${l}.status`,serialize:"ignore"}).on(f,(()=>Boolean(1))).on(d,(()=>Boolean(0))),h=(0,a.createStore)(t,{name:`${l}.state`,sid:s.sid}).on(u,((e,t)=>t)).on(f,((e,t)=>t)).reset(d);if(e){let{hooks:t}=e;(0,a.launch)({target:[t.store,t.store,t.event,t.event,t.event],params:[m,h,f,d,u]})}return i.open=f,i.close=d,i.status=m,i.state=h,i.set=u,c(`Gate:${l}`,i)})(function(e,t){let r=t&&P(n=t[0])&&(n.and||n.or)?t:[{and:t}];var n;let a,[[o,i],s]=g(r),l={},c={},u=s;var f;return"string"==typeof o?(c={name:o},P(f=i)&&"sid"in f||(l=i||{})):(e=>P(e)&&("domain"in e||"defaultState"in e||"name"in e))(o)&&(c=o,l=o.defaultState||{},a=o.domain),{hook:e,domain:a,defaultState:l,mainConfig:c,maybeConfig:u}}(d,e))}let v=e=>{throw Error(e)},_="undefined"!=typeof window?n.useLayoutEffect:n.useEffect;const{useSyncExternalStore:S}=i,{useSyncExternalStoreWithSelector:w}=o,k=(e,t)=>t?t.getState(e):e.getState(),j=n.createContext(null);let{Provider:O}=j,P=e=>"object"==typeof e&&null!==e,z=(e,t={})=>(P(e)&&(z(e.or,t),(e=>{for(let a in e)n=a,(e=>void 0===e)(r=e[a])||"or"===n||"and"===n||(t[n]=r);var r,n})(e),z(e.and,t)),t)},98116:(e,t,r)=>{function n(){return n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n.apply(this,arguments)}function a(e,t){for(let r in e)t(e[r],r)}function o(e,t){e.forEach(t)}function i(e,t){if(!e)throw Error(t)}function s({node:e=[],from:t,source:r,parent:n=t||r,to:a,target:i,child:s=a||i,scope:l={},meta:c={},family:u={type:"regular"},regional:f}={}){let d=ce(n),p=ce(u.links),m=ce(u.owners),h=[];o(e,(e=>e&&J(h,e)));let y={id:re(),seq:h,next:ce(s),meta:c,scope:l,family:{type:u.type||"crosslink",links:p,owners:m}};return o(p,(e=>J(C(e),y))),o(m,(e=>J(N(e),y))),o(d,(e=>J(e.next,y))),f&&ae&&le(M(ae),[y]),y}function l(e,t,r){let n,a=Te,i=null,s=Ke;if(e.target&&(t=e.params,r=e.defer,n=e.meta,a="page"in e?e.page:a,e.stack&&(i=e.stack),s=R(e)||s,e=e.target),s&&Ke&&s!==Ke&&(Ke=null),Array.isArray(e))for(let r=0;r<e.length;r++)Re("pure",a,A(e[r]),i,t[r],s,n);else Re("pure",a,A(e),i,t,s,n);if(r&&!We)return;let l,c,u,f,d,p,m={isRoot:We,currentPage:Te,scope:Ke,isWatch:Le,isPure:Ue};We=0;e:for(;f=De();){let{idx:e,stack:t,type:r}=f;u=t.node,Te=d=t.page,Ke=R(t),d?p=d.reg:Ke&&(p=Ke.reg);let n=!!d,a=!!Ke,i={fail:0,scope:u.scope};l=c=0;for(let o=e;o<u.seq.length&&!l;o++){let s=u.seq[o];if(s.order){let{priority:n,barrierID:a}=s.order,i=a?d?`${d.fullID}_${a}`:a:0;if(o!==e||r!==n){a?Be.has(i)||(Be.add(i),qe(o,t,n,a)):qe(o,t,n);continue e}a&&Be.delete(i)}switch(s.type){case"mov":{let e,r=s.data;switch(r.from){case x:e=M(t);break;case"a":case"b":e=t[r.from];break;case"value":e=r.store;break;case"store":if(p&&!p[r.store.id])if(n){let e=Xe(d,r.store.id);t.page=d=e,e?p=e.reg:a?(Ye(Ke,r.store,0,1,r.softRead),p=Ke.reg):p=void 0}else a&&Ye(Ke,r.store,0,1,r.softRead);e=Ae(p&&p[r.store.id]||r.store)}switch(r.to){case x:t.value=e;break;case"a":case"b":t[r.to]=e;break;case"store":Je(d,Ke,u,r.target).current=e}break}case"compute":let e=s.data;if(e.fn){Le="watch"===q(u,"op"),Ue=e.pure;let r=e.safe?(0,e.fn)(M(t),i.scope,t):Ze(i,e.fn,t);e.filter?c=!r:t.value=r,Le=m.isWatch,Ue=m.isPure}}l=i.fail||c}if(He&&He(t,i),!l){let e=M(t),r=R(t);if(o(u.next,(n=>{Re("child",d,n,t,e,r)})),r){q(u,"needFxCounter")&&Re("child",d,r.fxCount,t,e,r),q(u,"storeChange")&&Re("child",d,r.storeChange,t,e,r),q(u,"warnSerialize")&&Re("child",d,r.warnSerializeNode,t,e,r);let n=r.additionalLinks[u.id];n&&o(n,(n=>{Re("child",d,n,t,e,r)}))}}}We=m.isRoot,Te=m.currentPage,Ke=R(m)}function c(e,t="combine"){let r=t+"(",n="",o=0;return a(e,(e=>{o<25&&(null!=e&&(r+=n,r+=K(e)?B(e).fullName:e.toString()),o+=1,n=", ")})),r+")"}function u(e,t){let r,n,a=e;if(t){let a=B(t);0===e.length?(r=a.path,n=a.fullName):(r=a.path.concat([e]),n=0===a.fullName.length?e:a.fullName+"/"+e)}else r=0===e.length?[]:[e],n=e;return{shortName:a,fullName:n,path:r}}function f(e,t){let r=t?e:e[0];pe(r);let a=r.or,o=r.and;if(o){let r=t?o:o[0];if(ue(r)&&"and"in r){let r=f(o,t);e=r[0],a=n({},a,r[1])}else e=o}return[e,a]}function d(e,...t){let r=ie();if(r){let n=r.handlers[e];if(n)return n(r,...t)}}function p(e,t){let r=et({or:t,and:"string"==typeof e?{name:e}:e}),n=(e,...t)=>(Q(!q(n,"derived"),"call of derived event","createEvent"),Q(!Ue,"unit call from pure function","operators like sample"),Te?((e,t,r,n)=>{let a=Te,o=null;if(t)for(o=Te;o&&o.template!==t;)o=D(o);Ve(o);let i=e.create(r,n);return Ve(a),i})(n,a,e,t):n.create(e,t)),a=ie(),o=Object.assign(n,{graphite:s({meta:ut(r.actualOp||"event",n,r),regional:1}),create:e=>(l({target:n,params:e,scope:Ke}),e),watch:e=>lt(n,e),map:e=>ft(n,$,e,[ze()]),filter:e=>ft(n,"filter",e.fn?e:e.fn,[ze(ve,1)]),filterMap:e=>ft(n,"filterMap",e,[ze(),Oe((e=>!de(e)),1)]),prepend(e){let t=p("* ? "+n.shortName,{parent:D(n)});return d("eventPrepend",A(t)),it(t,n,[ze()],"prepend",e),ct(n,t),t}});return null!=r&&r.domain&&r.domain.hooks.event(o),I(o,"id",o.graphite.id),oe(o.graphite),o}function m(e,t,r,n){return he(r,t,"first argument"),i(fe(n),"second argument should be a function"),Q(!q(e,"derived"),`${t} in derived store`,`${t} in store created via createStore`),o(Array.isArray(r)?r:[r],(t=>{e.off(t),F(e).set(t,ot(dt(t,e,"on",be,n)))})),e}function h(e,t){let r=et(t),a=xe(e),c=p({named:"updates",derived:1});d("storeBase",a);let u=a.id,f={subscribers:new Map,updates:c,defaultState:e,stateRef:a,getState(){let e,t=a;if(Te){let t=Te;for(;t&&!t.reg[u];)t=D(t);t&&(e=t)}return!e&&Ke&&(Ye(Ke,a,1),e=Ke),e&&(t=e.reg[u]),Ae(t)},setState:e=>l({target:f,params:e,defer:1,scope:Ke}),reset:(...e)=>(o(e,(e=>m(f,".reset",e,(()=>f.defaultState)))),f),on:(e,t)=>m(f,".on",e,t),off(e){let t=F(f).get(e);return t&&(t(),F(f).delete(e)),f},map(e,t){let r,n;ue(e)&&(r=e,e=e.fn),Q(de(t),"second argument of store.map","updateFilter");let o=f.getState();ie()?n=null:de(o)||(n=e(o,t));let i=h(n,{name:`${f.shortName} ? *`,derived:1,and:r}),s=dt(f,i,$,ge,e);return Ce(E(i),{type:$,fn:e,from:a}),E(i).noInit=1,d("storeMap",a,s),i},watch(e,t){if(!t||!K(e)){let t=lt(f,e);return d("storeWatch",a,e)||e(f.getState()),t}return i(fe(t),"second argument should be a function"),e.watch((e=>t(f.getState(),e)))}},y=ut("store",f,r),g=f.defaultConfig.updateFilter;f.graphite=s({scope:{state:a,fn:g},node:[Oe(((e,t,r)=>(r.scope&&!r.scope.reg[a.id]&&(r.b=1),e))),Pe(a),Oe(((e,t,{a:r,b:n})=>!de(e)&&(e!==r||n)),1),g&&ze(ge,1),we({from:x,target:a})],child:c,meta:n({},y,{defaultState:e}),regional:1}),I(f,"id",f.graphite.id),I(f,"rootStateRefId",u);let b=q(f,"serialize"),v=q(f,"derived"),_="ignore"===b,S=q(f,"sid");return S&&(I(f,"storeChange",1),a.sid=S),S||_||v||I(f,"warnSerialize",1),i(v||!de(e),"current state can't be undefined, use null instead"),le(f,[c]),null!=r&&r.domain&&r.domain.hooks.store(f),v||(f.reinit=p({named:"reinit"}),f.reset(f.reinit)),a.meta=f.graphite.meta,oe(f.graphite),f}function y(...e){let t,r,n;[e,n]=f(e);let a,o,s,l=e[e.length-1];if(fe(l)?(r=e.slice(0,-1),t=l):r=e,1===r.length){let e=r[0];L(e)||(a=e,o=1)}if(!o&&(a=r,t)){s=1;let e=t;t=t=>e(...t)}return i(ue(a),"shape should be an object"),pt(Array.isArray(a),!s,a,n,t)}function g(){let e={};return e.req=new Promise(((t,r)=>{e.rs=t,e.rj=r})),e.req.catch((()=>{})),e}function b(e,t={}){let r=et(fe(e)?{handler:e}:e,t),a=p(fe(e)?{handler:e}:e,n({},t,{actualOp:"effect"})),o=A(a);I(o,"op",a.kind="effect"),a.use=e=>(i(fe(e),".use argument should be a function"),y.scope.handler=e,a),a.use.getCurrent=()=>y.scope.handler;let c=a.finally=p({named:"finally",derived:1}),u=a.done=c.filterMap({named:"done",fn({status:e,params:t,result:r}){if("done"===e)return{params:t,result:r}}}),f=a.fail=c.filterMap({named:"fail",fn({status:e,params:t,error:r}){if("fail"===e)return{params:t,error:r}}}),d=a.doneData=u.map({named:"doneData",fn:({result:e})=>e}),m=a.failData=f.map({named:"failData",fn:({error:e})=>e}),y=s({scope:{handler:a.defaultConfig.handler||(()=>i(0,`no handler used in ${a.getType()}`))},node:[Oe(((e,t,r)=>{let n=t.handler,o=R(r);if(o){let e=o.handlers.unitMap.get(a)||o.handlers.sidMap[a.sid];e&&(n=e)}return e.handler=n,e}),0,1),Oe((({params:e,req:t,handler:r,args:n=[e]},a,o)=>{let i=ht(o),s=yt(e,t,1,c,o,i),l=yt(e,t,0,c,o,i),[u,f]=mt(r,l,n);u&&(ue(f)&&fe(f.then)?f.then(s,l):s(f))}),0,1)],meta:{op:"fx",fx:"runner"}});o.scope.runner=y,J(o.seq,Oe(((e,{runner:t},r)=>{let n=D(r)?{params:e,req:{rs(e){},rj(e){}}}:e;return r.meta||(r.meta={fxID:ne()}),l({target:t,params:n,defer:1,scope:R(r),meta:r.meta}),n.params}),0,1)),a.create=e=>{let t=g(),r={params:e,req:t};if(Ke&&!Le){let e=Ke;t.req.finally((()=>{Ge(e)})).catch((()=>{}))}return l({target:a,params:r,scope:Ke}),t.req};let b=a.inFlight=h(0,{serialize:"ignore",named:(q(a,"name")||a.graphite.id)+".inFlight"}).on(a,(e=>e+1)).on(c,(e=>e-1)).map({fn:e=>e,named:"inFlight"});I(c,"needFxCounter","dec"),I(a,"needFxCounter",1);let v=a.pending=b.map({fn:e=>e>0,named:"pending"});return le(a,[c,u,f,d,m,v,b]),null!=r&&r.domain&&r.domain.hooks.effect(a),a}function v(e){let t;[e,t]=f(e,1);let{source:r,effect:n,mapParams:a}=e,o=b(e,t);I(o,"attached",1);let i,{runner:s}=A(o).scope,c=Oe(((e,t,n)=>{let i,{params:s,req:c,handler:u}=e,f=o.finally,d=ht(n),p=yt(s,c,0,f,n,d),m=n.a,h=T(u),y=1;if(a?[y,i]=mt(a,p,[s,m]):i=r&&h?m:s,y){if(!h)return e.args=[m,i],1;l({target:u,params:{params:i,req:{rs:yt(s,c,1,f,n,d),rj:p}},page:n.page,defer:1,meta:n.meta})}}),1,1);if(r){let e;L(r)?(e=r,le(e,[o])):(e=y(r),le(o,[e])),i=[Pe(E(e)),c]}else i=[c];s.seq.splice(1,0,...i),o.use(n);let d=D(n);return d&&(Object.assign(B(o),u(o.shortName,d)),o.defaultConfig.parent=d),ct(n,o,"effect"),o}function _(...e){let[[t,r],n]=f(e),o={};return a(r,((e,r)=>{let a=o[r]=p(r,{parent:D(t),config:n});t.on(a,e),ct(t,a)})),o}function S(e,t){let r=et({or:t,and:"string"==typeof e?{name:e}:e}),n=s({family:{type:"domain"},regional:1,parent:(null==r?void 0:r.domain)||(null==r?void 0:r.parent)}),i={history:{},graphite:n,hooks:{}};n.meta=ut("domain",i,{parent:(null==r?void 0:r.domain)||(null==r?void 0:r.parent),or:r}),a({Event:p,Effect:b,Store:h,Domain:S},((e,t)=>{let r=t.toLowerCase(),n=p({named:`on${t}`});i.hooks[r]=n;let a=new Set;i.history[`${r}s`]=a,n.create=e=>(l(n,e),e),J(A(n).seq,Oe(((e,t,r)=>(r.scope=null,e)))),n.watch((e=>{le(i,[e]),a.add(e),e.ownerSet||(e.ownerSet=a),D(e)||(e.parent=i)})),le(i,[n]),i[`onCreate${t}`]=e=>(o(a,e),n.watch(e)),i[`create${t}`]=i[r]=(t,r)=>{let a=et({and:r,or:t});return null!=a&&a.domain?e(t,r):n(e(t,{parent:i,or:a}))}}));let c=D(i);return c&&a(i.hooks,((e,t)=>it(e,c.hooks[t]))),null!=r&&r.domain&&r.domain.hooks.domain(i),i}function w(e,t){he(e,"merge","first argument");let r=p({name:c(e,"merge"),derived:1,and:t});return it(e,r,[],"merge"),r}function k(e,t){let r=0;return o(bt,(n=>{n in e&&(i(null!=e[n],vt(t,n)),r=1)})),r}function j(...e){let t,r,n,a,[[o,i,s],l]=f(e),c=1;return de(i)&&ue(o)&&k(o,"sample")&&(i=o.clock,s=o.fn,c=!o.greedy,a=o.filter,t=o.target,r=o.name,n=o.sid,o=o.source),_t("sample",i,o,a,t,s,r,l,c,1,0,n)}function O(...e){let[[t,r],n]=f(e);return r||(r=t,t=r.source),k(r,"guard"),_t("guard",r.clock,t,r.filter,r.target,null,r.name,n,!r.greedy,0,1)}function P(e,{scope:t,safe:r}={}){i(t||Ke||r,"scopeBind cannot be called outside of forked .watch");let n=t||Ke;return T(e)?t=>{let r=g();return l({target:e,params:{params:t,req:r},scope:n}),r.req}:t=>(l({target:e,params:t,scope:n}),t)}r.d(t,{attach:()=>v,clearNode:()=>at,combine:()=>y,createApi:()=>_,createDomain:()=>S,createEffect:()=>b,createEvent:()=>p,createNode:()=>s,createStore:()=>h,forward:()=>st,guard:()=>O,is:()=>X,launch:()=>l,sample:()=>j,scopeBind:()=>P,step:()=>$e});let z="undefined"!=typeof Symbol&&Symbol.observable||"@@observable",$="map",x="stack",A=e=>e.graphite||e,C=e=>e.family.owners,N=e=>e.family.links,E=e=>e.stateRef,M=e=>e.value,F=e=>e.subscribers,D=e=>e.parent,R=e=>e.scope,q=(e,t)=>A(e).meta[t],I=(e,t,r)=>A(e).meta[t]=r,B=e=>e.compositeName,K=e=>(fe(e)||ue(e))&&"kind"in e;const W=e=>t=>K(t)&&t.kind===e;let L=W("store"),U=W("event"),T=W("effect"),G=W("domain"),V=W("scope");var X={__proto__:null,unit:K,store:L,event:U,effect:T,domain:G,scope:V,attached:e=>T(e)&&1==q(e,"attached")};let H=(e,t)=>{let r=e.indexOf(t);-1!==r&&e.splice(r,1)},J=(e,t)=>e.push(t),Q=(e,t,r)=>!e&&console.error(`${t} is deprecated${r?`, use ${r} instead`:""}`);const Y=()=>{let e=0;return()=>""+ ++e};let Z,ee=Y(),te=Y(),re=Y(),ne=Y(),ae=null,oe=e=>{Z&&Z(e,ae)},ie=()=>ae&&ae.template,se=e=>(e&&ae&&ae.sidRoot&&(e=`${ae.sidRoot}|${e}`),e),le=(e,t)=>{let r=A(e);o(t,(e=>{let t=A(e);"domain"!==r.family.type&&(t.family.type="crosslink"),J(C(t),r),J(N(r),t)}))},ce=(e=[])=>(Array.isArray(e)?e:[e]).flat().map(A),ue=e=>"object"==typeof e&&null!==e,fe=e=>"function"==typeof e,de=e=>void 0===e,pe=e=>i(ue(e)||fe(e),"expect first argument be an object");const me=(e,t,r,n)=>i(!(!ue(e)&&!fe(e)||!("family"in e)&&!("graphite"in e)),`${t}: expect ${r} to be a unit (store, event or effect)${n}`);let he=(e,t,r)=>{Array.isArray(e)?o(e,((e,n)=>me(e,t,`${n} item of ${r}`,""))):me(e,t,r," or array of units")},ye=(e,t,r="target")=>o(ce(t),(t=>Q(!q(t,"derived"),`${e}: derived unit in "${r}"`,"createEvent/createStore"))),ge=(e,{fn:t},{a:r})=>t(e,r),be=(e,{fn:t},{a:r})=>t(r,e),ve=(e,{fn:t})=>t(e);const _e=(e,t,r,n)=>{let a={id:te(),type:e,data:t};return r&&(a.order={priority:r},n&&(a.order.barrierID=++Se)),a};let Se=0,we=({from:e="store",store:t,target:r,to:n=(r?"store":x),batch:a,priority:o})=>_e("mov",{from:e,store:t,to:n,target:r},o,a),ke=({fn:e,batch:t,priority:r,safe:n=0,filter:a=0,pure:o=0})=>_e("compute",{fn:e,safe:n,filter:a,pure:o},r,t),je=({fn:e})=>ke({fn:e,priority:"effect"}),Oe=(e,t,r)=>ke({fn:e,safe:1,filter:t,priority:r&&"effect"}),Pe=(e,t,r)=>we({store:e,to:t?x:"a",priority:r&&"sampler",batch:1}),ze=(e=ve,t)=>ke({fn:e,pure:1,filter:t}),$e={mov:we,compute:ke,filter:({fn:e,pure:t})=>ke({fn:e,filter:1,pure:t}),run:je},xe=e=>({id:te(),current:e}),Ae=({current:e})=>e,Ce=(e,t)=>{e.before||(e.before=[]),J(e.before,t)},Ne=null;const Ee=(e,t)=>{if(!e)return t;if(!t)return e;let r;return(e.v.type===t.v.type&&e.v.id>t.v.id||Ie(e.v.type)>Ie(t.v.type))&&(r=e,e=t,t=r),r=Ee(e.r,t),e.r=e.l,e.l=r,e},Me=[];let Fe=0;for(;Fe<6;)J(Me,{first:null,last:null,size:0}),Fe+=1;const De=()=>{for(let e=0;e<6;e++){let t=Me[e];if(t.size>0){if(3===e||4===e){t.size-=1;let e=Ne.v;return Ne=Ee(Ne.l,Ne.r),e}1===t.size&&(t.last=null);let r=t.first;return t.first=r.r,t.size-=1,r.v}}},Re=(e,t,r,n,a,o,i)=>qe(0,{a:null,b:null,node:r,parent:n,value:a,page:t,scope:o,meta:i},e),qe=(e,t,r,n=0)=>{let a=Ie(r),o=Me[a],i={v:{idx:e,stack:t,type:r,id:n},l:null,r:null};3===a||4===a?Ne=Ee(Ne,i):(0===o.size?o.first=i:o.last.r=i,o.last=i),o.size+=1},Ie=e=>{switch(e){case"child":return 0;case"pure":return 1;case"read":return 2;case"barrier":return 3;case"sampler":return 4;case"effect":return 5;default:return-1}},Be=new Set;let Ke,We=1,Le=0,Ue=0,Te=null,Ge=e=>{Ke=e},Ve=e=>{Te=e};const Xe=(e,t)=>{if(e){for(;e&&!e.reg[t];)e=D(e);if(e)return e}return null};let He,Je=(e,t,r,n,a)=>{let o=Xe(e,n.id);return o?o.reg[n.id]:t?(Ye(t,n,a),t.reg[n.id]):n};const Qe=e=>e;let Ye=(e,t,r,a,i)=>{var s;let l=e.reg,c=t.sid,u=null==t||null===(s=t.meta)||void 0===s?void 0:s.serialize,f=e.fromSerialize&&"ignore"!==u&&(null==u?void 0:u.read)||Qe;if(l[t.id])return;let d={id:t.id,current:t.current,meta:t.meta};if(d.id in e.values.idMap)d.current=e.values.idMap[d.id];else if(c&&c in e.values.sidMap&&!(c in e.sidIdMap))d.current=f(e.values.sidMap[c]);else if(t.before&&!i){let i=0,s=r||!t.noInit||a;o(t.before,(t=>{switch(t.type){case $:{let n=t.from;if(n||t.fn){n&&Ye(e,n,r,a);let o=n&&l[n.id].current;s&&(d.current=t.fn?t.fn(o):o)}break}case"field":i||(i=1,d.current=Array.isArray(d.current)?[...d.current]:n({},d.current)),Ye(e,t.from,r,a),s&&(d.current[t.field]=l[l[t.from.id].id].current)}}))}c&&(e.sidIdMap[c]=t.id),l[t.id]=d};const Ze=(e,t,r)=>{try{return t(M(r),e.scope,r)}catch(t){console.error(t),e.fail=1,e.failReason=t}};let et=(e,t={})=>(ue(e)&&(et(e.or,t),a(e,((e,r)=>{de(e)||"or"===r||"and"===r||(t[r]=e)})),et(e.and,t)),t);const tt=(e,t)=>{H(e.next,t),H(C(e),t),H(N(e),t)},rt=(e,t,r)=>{let n;e.next.length=0,e.seq.length=0,e.scope=null;let a=N(e);for(;n=a.pop();)tt(n,e),(t||r&&"sample"!==q(e,"op")||"crosslink"===n.family.type)&&rt(n,t,"on"!==q(n,"op")&&r);for(a=C(e);n=a.pop();)tt(n,e),r&&"crosslink"===n.family.type&&rt(n,t,"on"!==q(n,"op")&&r)},nt=e=>e.clear();let at=(e,{deep:t}={})=>{let r=0;if(e.ownerSet&&e.ownerSet.delete(e),L(e))nt(F(e));else if(G(e)){r=1;let t=e.history;nt(t.events),nt(t.effects),nt(t.stores),nt(t.domains)}rt(A(e),!!t,r)},ot=e=>{let t=()=>at(e);return t.unsubscribe=t,t},it=(e,t,r,n,a)=>s({node:r,parent:e,child:t,scope:{fn:a},meta:{op:n},family:{owners:[e,t],links:t},regional:1}),st=e=>{let t="forward",[{from:r,to:n},a]=f(e,1);return he(r,t,'"from"'),he(n,t,'"to"'),ye(t,n,"to"),ot(s({parent:r,child:n,meta:{op:t,config:a},family:{},regional:1}))},lt=(e,t)=>(i(fe(t),".watch argument should be a function"),ot(s({scope:{fn:t},node:[je({fn:ve})],parent:e,meta:{op:"watch"},family:{owners:e},regional:1}))),ct=(e,t,r="event")=>{D(e)&&D(e).hooks[r](t)},ut=(e,t,r)=>{let n=et(r),a="domain"===e,o=ee(),{sid:i=null,named:s=null,domain:l=null,parent:c=l}=n,f=s||n.name||(a?"":o),d=u(f,c),p={op:t.kind=e,name:t.shortName=f,sid:t.sid=se(i),named:s,unitId:t.id=o,serialize:n.serialize,derived:n.derived,config:n};if(t.parent=c,t.compositeName=d,t.defaultConfig=n,t.thru=e=>(Q(0,"thru","js pipe"),e(t)),t.getType=()=>d.fullName,!a){t.subscribe=e=>(pe(e),t.watch(fe(e)?e:t=>e.next&&e.next(t))),t[z]=()=>t;let e=ie();e&&(p.nativeTemplate=e)}return p};const ft=(e,t,r,n)=>{let a;ue(r)&&(a=r,r=r.fn);let o=p({name:`${e.shortName} ? *`,derived:1,and:a});return it(e,o,n,t,r),o},dt=(e,t,r,n,a)=>{let o=E(t),i=we({store:o,to:"a",priority:"read"});r===$&&(i.data.softRead=1);let s=[i,ze(n)];return d("storeOnMap",o,s,L(e)&&E(e)),it(e,t,s,r,a)},pt=(e,t,r,o,s)=>{let l=e?e=>[...e]:e=>n({},e),u=e?[]:{},f=l(u),p=xe(f),m=xe(1);p.type=e?"list":"shape",p.noInit=1,d("combineBase",p,m);let y=h(f,{name:c(r),derived:1,and:o}),g=E(y);g.noInit=1,I(y,"isCombine",1);let b=Pe(p);b.order={priority:"barrier"};let v=[Oe(((e,t,r)=>(r.scope&&!r.scope.reg[p.id]&&(r.c=1),e))),b,we({store:m,to:"b"}),Oe(((e,{key:r},n)=>{if(n.c||e!==n.a[r])return t&&n.b&&(n.a=l(n.a)),n.a[r]=e,1}),1),we({from:"a",target:p}),we({from:"value",store:0,target:m}),we({from:"value",store:1,target:m,priority:"barrier",batch:1}),Pe(p,1),s&&ze()];return a(r,((e,t)=>{if(!L(e))return i(!K(e)&&!de(e),`combine expects a store in a field ${t}`),void(f[t]=u[t]=e);u[t]=e.defaultState,f[t]=e.getState();let r=it(e,y,v,"combine",s);r.scope.key=t;let n=E(e);Ce(p,{type:"field",field:t,from:n}),d("combineField",n,r)})),y.defaultShape=r,Ce(g,{type:$,from:p,fn:s}),ie()||(y.defaultState=s?g.current=s(f):u),y};let mt=(e,t,r)=>{try{return[1,e(...r)]}catch(e){return t(e),[0,null]}},ht=e=>{let t=R(e),r={ref:t};return t&&J(t.activeEffects,r),r},yt=(e,t,r,n,a,o)=>i=>{o.ref&&H(o.ref.activeEffects,o),l({target:[n,gt],params:[r?{status:"done",params:e,result:i}:{status:"fail",params:e,error:i},{value:i,fn:r?t.rs:t.rj}],defer:1,page:a.page,scope:o.ref,meta:a.meta})};const gt=s({node:[je({fn:({fn:e,value:t})=>e(t)})],meta:{op:"fx",fx:"sidechain"}}),bt=["source","clock","target"],vt=(e,t)=>e+`: ${t} should be defined`;let _t=(e,t,r,n,a,o,s,l,c,u,f,m)=>{let g=!!a;i(!de(r)||!de(t),vt(e,"either source or clock"));let b=0;de(r)?b=1:K(r)||(r=y(r)),de(t)?t=r:(he(t,e,"clock"),Array.isArray(t)&&(t=w(t))),b&&(r=t),l||s||(s=r.shortName);let v="none";(f||n)&&(K(n)?v="unit":(i(fe(n),"`filter` should be function or unit"),v="fn")),a?(he(a,e,"target"),ye(e,a)):"none"===v&&u&&L(r)&&L(t)?a=h(o?o(Ae(E(r)),Ae(E(t))):Ae(E(r)),{name:s,sid:m,or:l}):(a=p({name:s,derived:1,or:l}),d("sampleTarget",A(a)));let _=xe(),S=[];if("unit"===v){let[r,o]=wt(n,a,t,_,e);S=[...St(o),...St(r)]}let[k,j]=wt(r,a,t,_,e),O=it(t,a,[d("sampleSourceLoader"),we({from:x,target:_}),...St(j),Pe(k,1,c),...S,Pe(_),"fn"===v&&ze(((e,t,{a:r})=>n(e,r)),1),o&&ze(ge),d("sampleSourceUpward",g)],e,o);return le(r,[O]),Object.assign(O.meta,l,{joint:1}),a};const St=e=>[Pe(e),Oe(((e,t,{a:r})=>r),1)],wt=(e,t,r,n,a)=>{let o=L(e),i=o?E(e):xe(),l=xe(o);return o||s({parent:e,node:[we({from:x,target:i}),we({from:"value",store:1,target:l})],family:{owners:[e,t,r],links:t},meta:{op:a},regional:1}),d("sampleSource",l,i,n),[i,l]}}}]);try{stManager.done("dist/api/widgets/chunks/state-management.71bf7122.js")}catch(e){}